apiVersion: gateway.envoyproxy.io/v1alpha1
kind: EnvoyProxy
metadata:
  name: public-proxy
  namespace: envoy-gateway-system
spec:
  concurrency: 4
  backendTLS:
    alpnProtocols:
      - http/1.1
    minVersion: "1.2"
    maxVersion: "1.3"
  provider:
    type: Kubernetes
    kubernetes:
      envoyService:
        type: LoadBalancer
        loadBalancerClass: metallb
        annotations:
          metallb.universe.tf/loadBalancerIPs: "192.168.254.254"
      envoyDeployment:
        container:
          resources:
            requests:
              cpu: "1"
              memory: 512Mi
            limits:
              cpu: "2"
              memory: 1Gi
