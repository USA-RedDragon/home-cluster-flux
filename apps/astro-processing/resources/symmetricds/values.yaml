# yaml-language-server: $schema=https://raw.githubusercontent.com/bjw-s/helm-charts/app-template-3.4.0/charts/other/app-template/schemas/helmrelease-helm-v2beta2.schema.json

controllers:
  symmetricds:
    replicas: 1

    pod:
      securityContext:
        runAsNonRoot: true
        runAsUser: 65534
        runAsGroup: 65534
        fsGroup: 65534
        fsGroupChangePolicy: OnRootMismatch

    containers:
      symmetricds:
        image:
          repository: jacob.pub/ghcr.io/usa-reddragon/symmetricds
          tag: "3.16.7@sha256:3cb4c9f624820fe5d7e96752014b965f801384c175fa0307d6ea61cda500418f"
        securityContext:
          readOnlyRootFilesystem: true
          allowPrivilegeEscalation: false
          capabilities:
            drop: ["ALL"]

persistence:
  logs:
    enabled: true
    type: emptyDir
    sizeLimit: 3Gi
    globalMounts:
      - path: /opt/symmetric-ds/logs
  tmp:
    enabled: true
    type: emptyDir
    sizeLimit: 3Gi
    globalMounts:
      - path: /opt/symmetric-ds/tmp
